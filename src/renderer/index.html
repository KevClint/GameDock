<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; connect-src 'self' https://api.rawg.io; img-src 'self' data: https:; font-src 'self' https://fonts.gstatic.com;">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GameDock</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20,400,0,0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="title-bar">
    <div class="title-left">
      <span class="logo-icon material-symbols-outlined">sports_esports</span>
      <span class="logo-text">GameDock</span>
    </div>
    <div class="title-actions">
      <button id="btn-hide" class="title-btn" title="Minimize to tray" aria-label="Minimize">
        <span class="material-symbols-outlined">minimize</span>
      </button>
      <button id="btn-close" class="title-btn title-btn-close" title="Quit" aria-label="Close">
        <span class="material-symbols-outlined">close</span>
      </button>
    </div>
  </div>

  <div class="app-shell">
    <aside class="sidebar" aria-label="Primary">
      <nav class="nav-primary">
        <button class="nav-item active" data-nav="library" title="Library">
          <span class="material-symbols-outlined">library_books</span>
          <span class="nav-label">Library</span>
        </button>
        <button class="nav-item" data-nav="discover" title="Discover">
          <span class="material-symbols-outlined">explore</span>
          <span class="nav-label">Discover</span>
        </button>
        <button class="nav-item" data-nav="community" title="Community">
          <span class="material-symbols-outlined">group</span>
          <span class="nav-label">Community</span>
        </button>
      </nav>

      <nav class="nav-secondary">
        <button class="nav-item" data-nav="cleaner" title="Cleaner">
          <span class="material-symbols-outlined">cleaning_services</span>
          <span class="nav-label">Cleaner</span>
        </button>
        <button class="nav-item" data-nav="settings-nav" title="Settings">
          <span class="material-symbols-outlined">tune</span>
          <span class="nav-label">Settings</span>
        </button>
        <div class="sort-controls sidebar-sort" id="sidebar-sort" title="Sort Library">
          <button type="button" id="sort-trigger" class="sort-trigger" aria-haspopup="listbox" aria-expanded="false" aria-label="Sort games">
            <span class="material-symbols-outlined sort-icon" aria-hidden="true">sort</span>
            <span class="sort-label" id="sort-label">Last Played</span>
            <span class="material-symbols-outlined sort-chevron" aria-hidden="true">expand_more</span>
          </button>
          <div id="sort-menu" class="sort-menu" role="listbox" hidden>
            <button type="button" class="sort-option" data-sort="lastPlayed" role="option">Last Played</button>
            <button type="button" class="sort-option" data-sort="playtime" role="option">Playtime</button>
            <button type="button" class="sort-option" data-sort="name" role="option">Name</button>
            <button type="button" class="sort-option" data-sort="favoritesOnly" role="option">Favorites Only</button>
          </div>
        </div>
      </nav>
    </aside>

    <main class="main-view">
      <header class="content-header">
        <div class="header-left">
          <h1 class="header-title">Library</h1>
        </div>

        <div class="header-actions">
          <label class="search-container" for="search-input">
            <span class="material-symbols-outlined search-icon">search</span>
            <input
              type="text"
              id="search-input"
              class="search-input"
              placeholder="Search games..."
              aria-label="Search games"
            />
          </label>

          <button class="btn-add-game" id="btn-add-game" title="Add a new game">
            <span class="material-symbols-outlined">add</span>
            <span>Add Game</span>
          </button>
        </div>
      </header>

      <section id="view-library" class="view-panel is-active">
        <div class="filter-bar">
          <div class="categories" id="categories">
            <div id="category-list" class="category-list"></div>
            <button class="cat-btn" id="btn-add-category" type="button" title="Add Category">Add (+)</button>
          </div>
        </div>

        <div class="game-grid" id="game-list"></div>
      </section>

      <section id="view-discovery" class="view-panel" hidden>
        <div class="discovery-shell">
          <div id="discovery-loading" class="discovery-loading">
            <div class="hero-skeleton skeleton shimmer"></div>
            <div class="discovery-grid" id="discovery-skeleton-grid">
              <article class="discovery-card skeleton-card skeleton shimmer"></article>
              <article class="discovery-card skeleton-card skeleton shimmer"></article>
              <article class="discovery-card skeleton-card skeleton shimmer"></article>
              <article class="discovery-card skeleton-card skeleton shimmer"></article>
              <article class="discovery-card skeleton-card skeleton shimmer"></article>
              <article class="discovery-card skeleton-card skeleton shimmer"></article>
            </div>
          </div>

          <div id="discovery-offline" class="discovery-offline is-hidden" hidden>
            <span class="material-symbols-outlined">cloud_off</span>
            <h3>Discovery Is Offline</h3>
            <p class="meta-text" id="discovery-offline-message">Check your RAWG API key or network and try again.</p>
            <button id="btn-discovery-retry" class="btn-secondary">
              <span class="material-symbols-outlined">refresh</span>
              Retry
            </button>
          </div>

          <div id="discovery-content" class="is-hidden" hidden>
            <div class="view-block-header">
              <h3>Discover Feed</h3>
              <button id="btn-discovery-refresh" class="btn-secondary" type="button">
                <span class="material-symbols-outlined">refresh</span>
                <span class="discovery-refresh-label">Refresh</span>
              </button>
            </div>
            <div id="discovery-hero"></div>
            <div class="view-block-header">
              <h3>Trending Games</h3>
              <span class="meta-text" id="discovery-meta-trending">Top picks this year</span>
            </div>
            <div id="discovery-grid-trending" class="discovery-grid"></div>
            <div class="view-block-header">
              <h3>Highly Rated Indie</h3>
              <span class="meta-text">Deal of the day alternatives</span>
            </div>
            <div id="discovery-grid-indie" class="discovery-grid"></div>
            <div class="view-block-header">
              <h3>Upcoming Releases</h3>
              <span class="meta-text">What is launching soon</span>
            </div>
            <div id="discovery-grid-upcoming" class="discovery-grid"></div>
            <div class="view-block-header">
              <h3>Top Rated Classics</h3>
              <span class="meta-text">High-score picks worth trying</span>
            </div>
            <div id="discovery-grid-top-rated" class="discovery-grid"></div>
          </div>
        </div>
      </section>
      <section id="view-community" class="view-panel" hidden>
        <div class="community-layout">
          <section class="community-feed-col">
            <div class="view-block-header">
              <h3>
                <span class="material-symbols-outlined">rss_feed</span>
                The Feed
              </h3>
              <span class="meta-text">Latest gaming headlines</span>
            </div>
            <div id="community-loading" class="community-loading is-hidden" hidden>
              <article class="feed-card community-skeleton-card">
                <div class="community-skeleton-line community-skeleton-source skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title short skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet short skeleton shimmer"></div>
              </article>
              <article class="feed-card community-skeleton-card">
                <div class="community-skeleton-line community-skeleton-source skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title short skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet short skeleton shimmer"></div>
              </article>
              <article class="feed-card community-skeleton-card">
                <div class="community-skeleton-line community-skeleton-source skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title short skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet short skeleton shimmer"></div>
              </article>
            </div>
            <div id="community-feed-list" class="community-feed-list"></div>
            <div id="community-loading-more" class="community-loading-more is-hidden" hidden>
              <article class="feed-card community-skeleton-card">
                <div class="community-skeleton-line community-skeleton-source skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title short skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet short skeleton shimmer"></div>
              </article>
              <article class="feed-card community-skeleton-card">
                <div class="community-skeleton-line community-skeleton-source skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-title short skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet skeleton shimmer"></div>
                <div class="community-skeleton-line community-skeleton-snippet short skeleton shimmer"></div>
              </article>
            </div>
            <div class="community-feed-actions">
              <button type="button" id="community-feed-more" class="btn-secondary" hidden>Show More</button>
            </div>
          </section>
        </div>
      </section>
      <section id="view-cleaner" class="view-panel" hidden>
        <div class="cleaner-shell">
          <section class="cleaner-summary-card">
            <div class="cleaner-summary-copy">
              <h3>System Cleaner</h3>
              <p class="meta-text">Safe cleanup for GameDock cache, temp files, and orphan artwork.</p>
            </div>
            <div class="cleaner-summary-stats">
              <div class="cleaner-stat">
                <span class="cleaner-stat-label">Reclaimable Space</span>
                <strong id="cleaner-total-space">0 B</strong>
              </div>
              <div class="cleaner-stat">
                <span class="cleaner-stat-label">Scan Result</span>
                <strong id="cleaner-total-files">0 files</strong>
              </div>
            </div>
            <div class="cleaner-actions">
              <button class="btn-secondary" id="btn-cleaner-analyze">
                <span class="material-symbols-outlined">manage_search</span>
                <span class="cleaner-action-label">Analyze</span>
              </button>
              <button class="btn-primary" id="btn-cleaner-run">
                <span class="material-symbols-outlined">cleaning_services</span>
                <span class="cleaner-action-label">Clean Selected</span>
              </button>
            </div>
          </section>
          <section class="cleaner-targets-card">
            <div class="view-block-header">
              <h3>Cleanup Targets</h3>
              <span id="cleaner-updated-at" class="meta-text">Not scanned yet</span>
            </div>
            <div id="cleaner-target-list" class="cleaner-target-list"></div>
          </section>
          <section class="cleaner-result-card" id="cleaner-result-card" hidden>
            <h3>Last Cleanup</h3>
            <p id="cleaner-result-text" class="meta-text">No cleanup run yet.</p>
          </section>
        </div>
      </section>
      <section id="view-settings" class="view-panel" hidden>
        <section class="settings-content settings-section">
          <h3>App Behavior</h3>
          <div class="settings-row">
            <div class="settings-copy">
              <div class="settings-name">Always on Top</div>
              <div class="settings-desc">Keep GameDock pinned above other windows.</div>
            </div>
            <label class="switch">
              <input type="checkbox" id="set-always-on-top" />
              <span class="switch-slider"></span>
            </label>
          </div>
          <div class="settings-row">
            <div class="settings-copy">
              <div class="settings-name">Launch on Startup</div>
              <div class="settings-desc">Start GameDock when Windows starts.</div>
            </div>
            <label class="switch">
              <input type="checkbox" id="set-auto-start" />
              <span class="switch-slider"></span>
            </label>
          </div>
          <div class="settings-row">
            <div class="settings-copy">
              <div class="settings-name">Minimize to Tray</div>
              <div class="settings-desc">Hide to tray instead of fully closing.</div>
            </div>
            <label class="switch">
              <input type="checkbox" id="set-minimize-tray" />
              <span class="switch-slider"></span>
            </label>
          </div>
          <div class="settings-row">
            <div class="settings-copy">
              <div class="settings-name">Launch Notifications</div>
              <div class="settings-desc">Show a desktop alert when a game starts.</div>
            </div>
            <label class="switch">
              <input type="checkbox" id="set-launch-notifications" />
              <span class="switch-slider"></span>
            </label>
          </div>
          <div class="settings-row">
            <div class="settings-copy">
              <div class="settings-name">Simplified Library Cards</div>
              <div class="settings-desc">Use compact game cards in Library while keeping all actions.</div>
            </div>
            <label class="switch">
              <input type="checkbox" id="set-simplified-cards" />
              <span class="switch-slider"></span>
            </label>
          </div>
          <div class="settings-row">
            <div class="settings-copy">
              <div class="settings-name">Theme Mode</div>
              <div class="settings-desc">Switch between dark and light appearance.</div>
            </div>
            <select id="set-theme-mode" class="settings-select" aria-label="Theme Mode">
              <option value="dark">Dark</option>
              <option value="light">Light</option>
            </select>
          </div>
          <div class="settings-row">
            <div class="settings-copy">
              <div class="settings-name">Accent Color</div>
              <div class="settings-desc">Customize the highlight color used across buttons and UI accents.</div>
            </div>
            <input type="color" id="set-accent-color" class="color-input" value="#8b5cf6" aria-label="Accent Color" />
          </div>
          <h3>System</h3>
          <div class="settings-row">
            <div class="settings-copy">
              <div class="settings-name">Version</div>
              <div class="settings-desc">Current installed build.</div>
            </div>
            <span id="set-app-version" class="setting-value">-</span>
          </div>
          <div class="settings-actions">
            <div class="settings-inline-actions">
              <button id="btn-export-backup" class="btn-secondary">
                <span class="material-symbols-outlined">save</span>
                Export
              </button>
              <button id="btn-import-backup" class="btn-secondary">
                <span class="material-symbols-outlined">upload</span>
                Import
              </button>
            </div>
            <button class="btn-primary" id="btn-save-settings">Save Settings</button>
          </div>
        </section>
      </section>
    </main>
  </div>

  <div id="delete-bar" class="delete-bar">
    <span id="delete-bar-name" class="delete-bar-name"></span>
    <div class="delete-bar-actions">
      <button id="delete-bar-btn" class="btn-delete-confirm">Remove Selected</button>
      <button id="delete-bar-cancel" class="btn-delete-cancel">Cancel</button>
    </div>
  </div>

  <div class="modal-overlay" id="modal-overlay" style="display:none">
    <div class="modal" data-editing-id="">
      <div class="modal-header">
        <h2 id="modal-title">Add Game</h2>
        <button class="modal-close" id="modal-close-btn" aria-label="Close modal">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>

      <div class="modal-body">
        <div class="modal-field">
          <label for="game-name">Game Name</label>
          <input type="text" id="game-name" placeholder="e.g. Valorant" />
        </div>

        <div class="modal-field">
          <label for="game-category">Category</label>
          <select id="game-category">
            <option value="FPS">FPS</option>
            <option value="MOBA">MOBA</option>
            <option value="RPG">RPG</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <div class="modal-field">
          <label for="game-path">Game Executable</label>
          <div class="path-input-group">
            <input type="text" id="game-path" placeholder="Path to .exe..." readonly />
            <button type="button" id="btn-browse" class="btn-browse">Browse</button>
          </div>
        </div>

        <button type="button" id="btn-toggle-advanced" class="btn-link">Show Advanced Options</button>

        <div id="advanced-options" class="advanced-options hidden">
          <div class="modal-field">
            <label for="game-args">Launch Arguments (Optional)</label>
            <input type="text" id="game-args" placeholder="e.g. -novid -dx11" />
          </div>
          <div class="modal-field">
            <label for="game-working-dir">Working Directory (Optional)</label>
            <input type="text" id="game-working-dir" placeholder="Defaults to exe folder" />
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="btn-detect-steam" class="btn-secondary">
          <span class="material-symbols-outlined">cloud_download</span>
          Detect Steam
        </button>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="btn-cancel-add">Cancel</button>
          <button type="button" class="btn-primary" id="btn-confirm-add">Add Game</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="steam-import-overlay" style="display:none">
    <div class="modal steam-import-modal">
      <div class="modal-header">
        <h2>Steam Import Wizard</h2>
        <button class="modal-close" id="steam-import-close" aria-label="Close wizard">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="steam-import-toolbar">
          <button class="btn-secondary" id="steam-select-all">Select All</button>
          <button class="btn-secondary" id="steam-select-none">Select None</button>
        </div>
        <div id="steam-import-list" class="steam-import-list"></div>
      </div>
      <div class="modal-footer">
        <span id="steam-import-summary" class="meta-text">No games detected yet.</span>
        <div class="modal-actions">
          <button class="btn-secondary" id="steam-import-cancel">Cancel</button>
          <button class="btn-primary" id="steam-import-confirm">Import Selected</button>
        </div>
      </div>
    </div>
  </div>

  <div id="game-context-menu" class="context-menu" style="display:none">
    <button type="button" data-action="edit">Edit Game</button>
    <button type="button" data-action="set-cover-file">Set Custom Cover (File)</button>
    <button type="button" data-action="set-cover-url">Set Custom Cover (URL)</button>
    <button type="button" data-action="reset-cover">Reset Cover</button>
    <button type="button" data-action="toggle-select">Toggle Selection</button>
  </div>

  <div class="toast" style="display:none"></div>

  <script type="module" src="renderer.js"></script>
</body>
</html>




